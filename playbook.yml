#!/usr/bin/env ansible-playbook
---
- name: Apply Arch configuration to local machine
  hosts: localhost
  connection: local

  pre_tasks:
    - name: Get my username
      local_action: command whoami
      register: host_username
      become: no

    - name: Update package cache
      pacman:
        update_cache: yes
      become: yes
  
    - set_fact:
        host_username: "{{host_username.stdout}}"
      
  roles:
    - nvidia
    - enpass
    - dconf
    - dotfiles
    - software
    - nano
    - zgen
